<html>
<head>
<link rel="stylesheet" href="css/main.css">
<script type="text/javascript" src="js/jquery-1.10.2.min.js"></script>
<script type="text/javascript">

function insRow()
  {
  $("td #locpoint").removeClass("cur").addClass("nocur");      
  var i=document.getElementById('end').rowIndex
  var x=document.getElementById('myTable').insertRow(i)
  var y=x.insertCell(0)
  y.innerHTML="<td><button id=\"open\" name=\"0\">open</button><div class=\"path\"><div class=\"traffic-type\"></div><div class=\"traffic-panel\"></div></div><div class=\"cur\"id=\"locpoint\" onclick=\"deleteRow(this)\"></div></td>"

  $(".path").animate({
		height:"86px"
	},200);
       
  }

function deleteRow(r)
  {
  var i=r.parentNode.parentNode.rowIndex
  document.getElementById('myTable').deleteRow(i)

   $(".path").animate({
		height:"96px"
	},200);
  }

$(document).delegate('#open', 'click', function() {
  if($("button").attr("name")=="0")
{
    $(this).siblings('.path').animate({
      height:"290px"
    },300);
  $(this).siblings('.path').find(".traffic-panel").animate({
     height:"179px"
  },300);
  $(this).siblings('.path').find(".traffic-panel").css({
     "display":"block"
  });
  $("#open").attr("name","1");
}

else{
    $(this).siblings('.path').animate({
      height:"96px"
    },300);
  $(this).siblings('.path').find(".traffic-panel").animate({
     height:"0px"
  },300);
  $(this).siblings('.path').find(".traffic-panel").css({
     "display":"none"
  });
  $("#open").attr("name","0");
}
});


</script>
</head>

<body>
<table id="myTable" border="0">
<tr id="start">
  <td><div class="cur" id="locpoint"></div></td>
</tr>
<tr id="end">
  <td>
    <div class="path-first"></div>
    <div class="nocur" id="locpoint"></div>
  </td>
</tr>
</table>
<br />
<input type="button" onclick="insRow()" value="add place">


</body>
