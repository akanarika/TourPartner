<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<meta charset="utf-8">
    <title>jQM Complex Demo</title>
    <meta name="viewport" content="initial-scale=1, maximum-scale=1"/>
    <!--
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>    
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
    --> <link rel="stylesheet" href="css/index.css">
        <link rel="stylesheet" href="css/idangerous.swiper.css">
        <link rel="stylesheet" href="css/jquery.mobile-1.4.2.min.css">
        <script src="js/jquery.js"></script>
        <script src="js/infoBox.js"></script>
        <script src="js/jquery.mobile-1.4.2.min.js"></script>
        <script src="js/idangerous.swiper-2.1.min.js"></script>
        <script type="text/javascript"
          src="http://maps.google.com/maps/api/js?sensor=false&libraries=places,geometry">
		</script>  

  <style>
/*这里都是下面的互动条*/
body {
  overflow:hidden;  
}


.swiper-container {
  width: 100%;
  height: 500px;/*高度要满屏，需要调试？*/
  bottom: -420px;/*试着改成40px-420px*/
  color: #fff;
  text-align: center;
  position:absolute;
}
.slide {
  background: rgb(20,21,45);
}
/*.blue-slide {
  background: #4390ee;
}
.orange-slide {
  background: #ff8604;
}
.green-slide {
  background: #49a430;
}
.pink-slide {
  background: #973e76;
}*/
.swiper-slide .title {
  font-style: italic;
  font-size: 21px;
  margin-top: 0;
  margin-bottom: 0;
  line-height: 45px;
  height:40px;
}

.swiper-slide .body {
  font-size: 16px;
  margin-top: 20px;
  margin-bottom: 0;
  line-height: 45px;
}

.pagination {
  position: absolute;
  z-index: 20;
  left: 0;
  text-align:center;
  top: 60px;
  width:100%;
}
.swiper-pagination-switch {
  display: inline-block;
  width: 8px;
  height: 8px;
  border-radius: 8px;
  background: #222;
  margin-right: 5px;
  opacity: 0.8;
  border: 1px solid #fff;
  cursor: pointer;
}
.swiper-visible-switch {
  background: #aaa;
}
.swiper-active-switch {
  background: #fff;
}


/*这是橙色的圆圈*/
.nocur{
  background: url(img/circle_small_2.png) no-repeat;
  height:20px;
  position: relative;
  left:40px;
  top:-10px;
}

/*这是白色的圆圈*/
.cur{
  background: url(img/circle_small.png) no-repeat;
  height:25px;
  position: relative;
  left: 38px;
}

/*起点文字*/
.cur span{
  position: relative;
  font-size: 14px;
  left: -25px;
}

/*站点（橙色圆圈）文字*/
.nocur span{
  position: relative;
  left: -90px;
  top:-10px;
  color: black;
}

/*路径文字*/
.path1 span{
  position: relative;
  left: 20px;
  top:40px;
  color: black;
}

.path2 span{
  position: relative;
  left:-10px;
  top:35px;
  color: black;
}
/*白色表单*/
#myTable1{
  width: 45%;
  height: 500px;
  position: absolute;
  left: 17px;
  top: 105px;
  padding-left: 20px;
}

#myTable2{
  width: 45%;
  height: 500px;
  position: absolute;
  left: 350px;
  top: 105px;
  padding-left: 20px;
}

/*步行/巴士图标*/
.traffic-type1{
  width: 200px;
  height:42px;
  position: relative;
  left: 20px;
  top: 0px;
  border-bottom: 1px solid #a1a1ab;
  padding-bottom: 15px;
}

.traffic-type2{
  width: 200px;
  height:42px;
  position: relative;
  left: 20px;
  top: -25px;
  border-bottom: 1px solid #a1a1ab;
  border-top: 1px solid #a1a1ab;
  padding-bottom: 15px;
  padding-top: 15px;
}

.traffic-type1 img,.traffic-type2 img{
  position: relative;
  left: -85px;
  top: 0px;
}

/*车站*/
.traffic-panel{
  margin-top: 5px;
  width:200px;
  height: 0px;
  border: 1px solid #a1a1ab;
  position: relative;
  left: 20px;
  top:-25px;
  display: none;
  margin-top: 0px;
  border-top: none;
  color: black;
}

.path-first,.path1,.path2{
  margin: 0 80px 0 8px;
}

/*第一条白线*/
.path-first{
  border-left: 3px solid #eaedf1;
  height: 15px;
  position: relative;
  top: -18px;
  left: 40px;
}

/*后面的灰线*/
.path1{
  border-left: 3px solid #a1a1ab;
  height: 120px;
  position: relative;
  left:40px;
  top:-5px;
}

.path2{
  border-left: 3px solid #a1a1ab;
  height: 120px;
  position: relative;
  left:40px;
  top:-10px;
}

/*灰色背景*/
.body{
  z-index: 5;
  background:#d5d5d5;
  height: 100%;
}

#locationintro{
   position: absolute;
   top: 52px;
   left: 0;
}

.textintro{
  font-size: 14px;
  background: white;
  width: 300px;
  height: 300px;
  border: 1px solid #a1a1ab;
  position: absolute;
  left: 8px;
  top: 240px;
}

#wish{
  position: absolute;
  top:100px;
  left:100px;
  z-index: 10;
}
</style>  
</head>

<body>
<!--滑动条--> 

  <div class="swiper-container">           
    <div class="swiper-wrapper">
      <div class="swiper-slide slide">
        <div class="bar">
        <div class="title">上海一日游D1</div>
        <div class="cur" id="location"><span>静安寺—南京路步行街（15分钟）</span></div>
        </div>
        <div class="body">
        <div class="path-first"></div>
        
          <table id="myTable1" border="0" style="background:#fff">

<!--第一行的交通信息没有border-top--> 
            <tr>
                <div class="path2" style="z-index:10;"><span class="way">88米 （1分钟)  
                  <!--<button id="open" name="0">open</button>-->
                </span>
                <div class="traffic-type1"><img src="img/walk.png"></div>
                <!--<div class="traffic-panel"></div>-->
              </div>
            </tr>
<!--站点信息--> 
            <tr>
                <div class="nocur" id="location" style="z-index:10;"><span class="station">
                静安寺地铁站</span></div>
            </tr>
<!--后面的交通信息有border-top&border-bottom--> 
             <tr>
                <div class="path1" style="z-index:10;"><span class="way">地铁2号线 2站 (5分钟)<button id="open" name="0">open</button>  
                </span>
                <div class="traffic-type2"><img src="img/bus.png"></div>
                <div class="traffic-panel">
                  南京西路</br>人民广场
                  </div>
              </div>
            </tr>
<!--站点信息--> 
            <tr>
                <div class="nocur" id="location" style="z-index:10;"><span class="station">
                人民广场地铁站</span></div>
            </tr>
<!--第一行的交通信息没有border-top--> 
            <tr>
                <div class="path2" style="z-index:10;"><span class="way">350米 （5分钟)  
                </span>
                <div class="traffic-type2"><img src="img/walk.png"></div>
              </div>
            </tr>
<!--站点信息--> 
            <tr>
                <div class="nocur" id="location" style="z-index:10;"><span class="station">
                南京路步行街</span></div>
            </tr>    
          </table>
        </div>
      </div>


      <div class="swiper-slide slide">
        <div class="bar">
        <div class="title">上海一日游D1</div>
        <div class="cur" id="location"><span>南京路步行街—外滩（19分钟）</span></div>
        </div>
        <div class="body">
        <div class="path-first"></div>
        
          <table id="myTable2" border="0" style="background:#fff">

<!--第一行的交通信息没有border-top--> 
            <tr>
                <div class="path2" style="z-index:10;"><span class="way">310米 （7分钟)  
                </span>
                <div class="traffic-type1"><img src="img/walk.png"></div>
              </div>
            </tr>
<!--站点信息--> 
            <tr>
                <div class="nocur" id="location" style="z-index:10;"><span class="station">
                浙江中路站</span></div>
            </tr>
<!--后面的交通信息有border-top&border-bottom--> 
             <tr>
                <div class="path1" style="z-index:10;"><span class="way">37路 2站 (8分钟)<button id="open" name="0">open</button>  
                </span>
                <div class="traffic-type2"><img src="img/bus.png"></div>
                <div class="traffic-panel">
                  江西中路</br>南京东路
                  </div>
              </div>
            </tr>
<!--站点信息--> 
            <tr>
                <div class="nocur" id="location" style="z-index:10;"><span class="station">
                南京东路站</span></div>
            </tr>
<!--第一行的交通信息没有border-top--> 
            <tr>
                <div class="path2" style="z-index:10;"><span class="way">210米 （4分钟)  
                </span>
                <div class="traffic-type2"><img src="img/walk.png"></div>
              </div>
            </tr>
<!--站点信息--> 
            <tr>
                <div class="nocur" id="location" style="z-index:10;"><span class="station">
                外滩</span></div>
            </tr>    
          </table>
        </div>
         </div>

      </div>
       <div class="pagination"></div>   
    </div>
    
  </div>

<!--首页-->  
    <div data-role="page" id="map">
        <div data-role="header">
            <a href="#date" id="datebtn" data-role="button" class="ui-btn-right" data-rel="popup" data-transition="pop" style="z-index:100"></a>
            <div data-role="popup" id="date" data-theme="b">
              <ul data-role="listview" data-inset="true">
                <li data-icon="false"><a href="#">D1</a></li>
                <li data-icon="false"><a href="#">D2</a></li>
              </ul>
            </div>

        </div>
        <div data-role="content" id="content">
           <!-- <a href="#place" id="LOC">静安寺</a> -->
           <div id="mapCanvas"></div> 
        </div>

  
        <div data-theme="a" data-role="footer" data-position="fixed">
        </div>
    </div>

<!--地点信息（静安寺）-->
<div data-role="page" id="place">
        <div data-theme="f" data-role="header">
          <a href="#map" data-role="button" id="backtomap">返回</a>
           <!-- <h3 id="placename">静安寺</h3> -->

        </div>

        <div data-role="content" id="content" style="background:#d5d5d5;">
          <a href="#wishdetial" name="0"><img id="wish" src="img/note.png"></a>
          <img id="locationintro" src="img/jingantemple.jpg">
          <div class="textintro">
          <p>静安寺为著名江南古庙。原名重元寺、重云寺。静安寺是上海最为著名的真言宗古刹之一.这座古庙也是这闹市中难得的清修之地，它由大雄宝殿、天王殿、三圣殿三座主要建筑，雄伟壮观。</p>
          <p>门票50元,香期免费。</p>
          <p>开放时间：7:30-17:00，香期4:30-17:00开放 </p>
          <p>地址：上海市静安区南京西路1686号。</p>
          </div>
   
        
        </div>

        <div data-role="footer" data-position="fixed">
          <div data-role="navbar">
              <ul>
                  <li><a href="#" data-icon="grid" id="placebtn" class="ui-btn-active ui-state-persist">显示</a></li>
                    <li><a href="#mywish" data-icon="star" id="minebtn">我的</a></li>
                    <li><a href="#addwish" data-icon="info" id="addbtn">添加</a></li>
                </ul>
            </div>
        </div>
    </div>

<!--我的心愿-->
    <div data-role="page" id="mywish">
  <div data-role="header" data-theme="f">
    <a  data-role="button" data-rel="back">返回</a>
    <h1>我的</h1>
    <div data-role="navbar">
      <ul>
        <li><a href="#" class="ui-btn-active ui-state-persist" data-icon="home">完成心愿</a></li>
        <li><a href="#mytrip" data-icon="arrow-r">点滴记录</a></li>
      </ul>
    </div>
  </div>

  <div data-role="content">
      <ul id="wishlist">
      </ul>
  </div>

  <div data-role="footer">
  </div> 
</div> 

<!--我的游记-->
<div data-role="page" id="mytrip">
   <div data-role="header" data-theme="f">
    <a data-role="button" data-rel="back">返回</a>
    <h1>我的</h1>
    <div data-role="navbar">
      <ul>
        <li><a href="#mywish" data-icon="home">完成心愿</a></li>
        <li><a href="#" data-icon="arrow-r" class="ui-btn-active ui-state-persist">点滴记录</a></li>
      </ul>
    </div>
  </div>

  <div data-role="content">
    <ul id="triplist">
    </ul>
  </div>

  <div data-role="footer">
  </div>
</div> 

<!--编辑心愿-->
<div data-role="page" id="wishdetial">
  <div data-role="header" data-theme="f">
  <a data-role="button" data-rel="back">返回</a>
  <h1>心愿详情</h1>
  </div>

  <div data-role="content">
    <form ><!-- method="post" action="demoform.asp"> -->
      <div data-role="fieldcontain">
        <fieldset data-role="controlgroup" data-type="horizontal">
          <label for="notfinish">未完成</label>
          <input type="radio" name="condition" id="notfinish" value="notfinish" checked="true">
          <label for="finish">已完成</label>
          <input type="radio" name="condition" id="finish" value="finish"> 
        </fieldset>
      </div>
      <div data-role="fieldcontain">
        <fieldset data-role="controlgroup">
          <label for="memo"></label>
        <textarea type="memo" name="memo" id="memo">我要做的事情...
  </textarea>
     <input type="submit" data-inline="true" value="提交">
        </fieldset>
      </div>
    </form>
  </div>
</div>

<!--添加心愿-->
<div data-role="page" id="addwish">
  <div data-role="header" data-theme="f">
  <a data-role="button" data-rel="back">返回</a>
  <h1>添加</h1>
  <div data-role="navbar">
      <ul>
        <li><a href="#" class="ui-btn-active ui-state-persist" data-icon="home">心愿</a></li>
        <li><a href="#adddiary" data-icon="arrow-r">记录</a></li>
      </ul>
    </div>
  </div>

  <div data-role="content">
    <form ><!-- method="post" action="demoform.asp"> -->
      <div data-role="fieldcontain">
        <fieldset data-role="controlgroup" data-type="horizontal">
          <label for="notfinish">未完成</label>
          <input type="radio" name="condition" id="notfinish" value="notfinish">
          <label for="finish">已完成</label>
          <input type="radio" name="condition" id="finish" value="finish"> 
        </fieldset>
      </div>
      <div data-role="fieldcontain">
        <fieldset data-role="controlgroup">
          <label for="memo"></label>
        <textarea type="memo" name="memo" id="wishtext">
  </textarea>
     <input type="submit" data-inline="true" value="提交" id="wishsubmit">
        </fieldset>
      </div>
    </form>
  </div>
</div>

<!--添加游记-->
<div data-role="page" id="adddiary">
  <div data-role="header" data-theme="f">
  <a href="#place" data-role="button">返回</a>
  <h1>添加</h1>
  <div data-role="navbar">
      <ul>
        <li><a href="#addwish" data-icon="home">心愿</a></li>
        <li><a href="#" class="ui-btn-active ui-state-persist" data-icon="arrow-r">记录</a></li>
      </ul>
    </div>
  </div>

  <div data-role="content">
    <form><!--  method="post" action="demoform.asp"> -->
      <div data-role="fieldcontain">
        <fieldset data-role="controlgroup">
          <label for="memo"></label>
        <textarea type="memo" name="memo" id="triptext">
  </textarea>
     <input type="submit" data-inline="true" value="提交" id="tripsubmit">
        </fieldset>
      </div>
    </form>
  </div>
</div>
</body>
</html>

<script>
//滑动条
var mySwiper = new Swiper('.swiper-container',{
    pagination: '.pagination',
    paginationClickable: true,
  slidesPerview: 3
})

$(document).ready(function(e) {

//在其他页面隐藏滑动条
  $('#LOC').click(function(){
    $('.swiper-container').css('display','none');
  });

  $('#backtomap').click(function(){
    $('.swiper-container').css('display','');
  });

  $('.swiper-container').css('display','');
  });

  //点击open按钮的效果

  $('#open').click(function(){
     if($("button").attr("name")=="0")
    {
     $(this).parent().siblings('.traffic-panel').css({
        "height":"179px"
      },300);
     $(this).parent().siblings('.traffic-panel').css({
        "display":"block"
     });
     $(this).parent().parent('.path1').css({
        "height":"300px"
      },300);
      $(this).attr("name","1");
      $(this).css({
        "background":"url(img/up.png) no-repeat"
      });
    }
else{
  $(this).parent().siblings('.traffic-panel').css({
        "display":"none"
     });
   $(this).parent().parent('.path1').css({
        "height":"120px"
      },300);
  $("#open").attr("name","0");
    $(this).css({
    "background":"url(img/down.png) no-repeat"
  })
    }
  }); 

  $('#placebtn').click(function(){
    if($(this).attr("name")=="0"){
      $("#wish").css({
        "display":"none"
     });
      $('#placebtn').attr("name","1");
  }
  else{
    $("#wish").css({
        "display":""
     });
      $('#placebtn').attr("name","0");
  }
  });
</script> 


<script type="text/javascript">


var wish = [];
var trip = [];


/////////////////如果地图放首页，用这个事件响应函数///////////////////////
google.maps.event.addDomListener(window, 'load', initialize);
/////////////////如果地图放在jquery mobile的div里面（也就是通过footer切换的页面），用这个，并第二个参数要与该div的id一致//////////////
//$(document).on('pageshow', '#LOC',function(e,data){
//	initialize();
//});
////////////////////////////////////////////////////////////

var map;
var markers = [];
function initialize(){
			
			//////////////////////////////////add by wu/////////////////////////////////////////
			var bodyHeight = $('body').height();
			var mapHeight = bodyHeight - 150;
			$('#mapCanvas').height(mapHeight);
			////////////////////////////////////////////////////////////////////////////////////
			
            var myLatlng = new google.maps.LatLng(31.233718,121.464895);
            
            //var infowindows = [];
            var mapOptions = {
              center: myLatlng,
              zoom: 12,
              mapTypeId: google.maps.MapTypeId.ROADMAP,
              overviewMapControl: false,
              streetViewControl: false,
              panControl: false
            };

            map = new google.maps.Map(document.getElementById("mapCanvas"), mapOptions);

            infowindow = new google.maps.InfoWindow();
            var requests = [/*"CpQBhAAAAK6Y7zKR41HGzG38GpRB6NrVARjtu1604hsQl-RXNGiUg4sNRGNfo788vV__GGgna0MF-QYRz1c_GaPAjnJsCPT6nsrjsr5xkeN4KRjtXAc3DQSmro0_K-gim33SGN_pN4S_btkFzVk6Pzws5rEKZr0Nv4SFa-5Z5PXX6cRNyM6L9Bby-KWEPV1_YEUjcY4_pRIQvCtS1aHaVd_S2h9CLD9SIBoUdIGD1aWJ2qT8yBzhQv8z8g-zkUA",
            "CoQBcQAAAFCxIzeYM5AauphDiWuE41QdOvIBuQjdiG6WTd_ltyVjI2LLOyesWBVtG_D3sRnZRpUUNWYJVfuv3GK29hDacoxnB7QOADwtUf74ChwkCJkibaE4eKuZmgbM5Bt4PBT2Wh1ol9YzDkZfMHbitJvco08-myEEjFXNZO3PHIWhIJrNEhBj3WWcwjth4iudAr0ztNh0GhTZGEHeGpBkS5U7kI4KF0BHmoq9mA",
            "CoQBewAAAJTfu18cX2i89ES-dfTjQcilw3zAO9MoIgxWZxlzBbOqylv-U5kKjMwGAWKHyk6hDj-EnvymZh9afaX2wqIWkkYEjkZ8cxcQMI2xWDxY8R0UiP8szW7iKgZ5z6NtdvF_riLBYdipG2fswqv9lS9tKOo-L7gICCV9U9od47hsQokHEhDWNWdAeHJakFNAE-nyvmpoGhSLVzHbz8Opdd6hZGyK37dlL3j-WA",
            "CnRnAAAA-UlZ1ESulOeylBYHevFM4mwZyhdp-imgGcGTVQdrKJM6JfCkA3Y5_QwuikbG9ywofDMImRct_Er2q53Zk0ugRSbFeRK6YddUO6__pY7t_ybXdosVzVhIrQp3MrizyjTmm8szFPrrh7Eojv6oOdbUqhIQWCd0bJsXxMTiFxm2S2gIShoUJSK9IFQQfQsM7SXUlna6b3X3bPE"*/
            "CoQBewAAAGJrfCqN5ZjdZ8otSZWxHWJ4jzB-JL69CTKFFx7WcSRF-hHIanyxr-5pAKHS9eFf4vzRSkZfV8kal6Cs2GMhMWbmTRQIuH7vDqMFzNquXKudZNdJxCzgya4ILY2MeKdhVWuAElaLYa2XjUepZyEZkKMs50oZq0EDy9-sgVy0I0o3EhCYkDWeF5es9_VbqwoUTccPGhRzyDWMGu-vhvgvHnaLbbxuAYMm7g",
            "CnRqAAAAOmPMMmZQyrADrDdbX20kejFQQVk3cMzirvv0YkDAJptRxajTGH2b2c0NF4EXK22b6s5T5jIfRh1zYzOEUyp7nGOsgEp9K3igHTHng9BgdniA01co-MiF9r0t-eT28TItdvTMyElb4oV-dZBPvEOOZBIQzTQ3km30HZ1Y3zQy1btOlRoUOa8M-5XkTuOLzKHlvcf6t-exTxc","CnRoAAAAUNm9cQ8gGlEPoHatKFeKW7aI_7n2-uu4q0bj-XqTqtnEO5tbREayHTxj6hTLafct3qO9oT1u-flKQsT_wSARDmdyL7LvF0nS78fuT7YI43bGOq3jZM5qBz07YaliWqPncn-F7llbU-eGppNLjOfsBRIQkS7qnaEhF1Uy6xgB0FmQeBoUeBpi8YQbBQkYheqBPhMx7U4032c"]

            service = new google.maps.places.PlacesService(map);

            var image = {
              url: "img/circle_small_2.png",//place.icon,
              size: new google.maps.Size(30, 30),
              origin: new google.maps.Point(0, 0),
              anchor: new google.maps.Point(12,12),//17,34
              scaledSize: new google.maps.Size(25, 25)
            };

            //google.maps.event.addListener(searchBox, 'places_changed', function() {
            //markers = [];
            //var bounds = new google.maps.LatLngBounds();
            for(var i=0; i<3; i++){
                var request = {reference: requests[i]};
              map.setOptions({draggableCursor:'default'});
              
              //for (var i = 0, place; place = places[i]; i++) {
                service.getDetails(request, function(place, status) {
                if (status == google.maps.places.PlacesServiceStatus.OK) {
                    marker = new google.maps.Marker({
                    map: map,
                    position: place.geometry.location,
                    icon:image,
                    title:place.name,
                    zIndex: 999,
                    content:'<div id="infoclick"><a href="#place"><div id="infowin">'+place.name+'</br></div></a></div>'
                    //+'</br><span style="font-weight:bold">notes:</span>'
                    //+'</br>'+'<span style="font-weight:bold">地址:</span>'+place.formatted_address+'</br>'
                  });
                  markers.push(marker);
                  google.maps.event.addListener(marker, 'click', function() {
                    infowindow.setContent(this.content);
                    infowindow.open(map, this);
                    infowindow.setZIndex(10000);
                    preMark = this;
                    /*google.maps.event.addListener(infowindow, 'click', function() {
                      //$("#palce").trigger('click');
                    $.mobile.changePage($('#place'),'slide',true,true);
                    });*/
                  });
                //bounds.extend(marker.position);
                }
              });
                
              //}
            }
            /*------direction-----------*/
            /*--------direction_end---------*/

            map.setOptions({draggableCursor:'default'});
            google.maps.event.addListener(map, 'click', function() {
                    infowindow.close();
            });

            var service = new google.maps.places.PlacesService(map);
var directionsService = new google.maps.DirectionsService();
var start = new google.maps.LatLng(31.2235188,121.44528400000002);
var end = new google.maps.LatLng(31.234718,121.47489500000006);
var request = {
  origin: start,
  destination: end,
  //waypoints: waypts,
  optimizeWaypoints: false,//是否按顺序
  travelMode: google.maps.TravelMode.TRANSIT,
  transitOptions: {
  departureTime: new Date(1337675679473)},
}
directionsService.route(request, function(response, status) {
    if (status == google.maps.DirectionsStatus.OK) {
      var directionsDisplay = new google.maps.DirectionsRenderer({suppressMarkers: true,preserveViewport: true,});
      directionsDisplay.setDirections(response);
      directionsDisplay.setMap(map);
    }
});


var end2 = new google.maps.LatLng(31.240261,121.49057700000003);
var directionsService2 = new google.maps.DirectionsService();
var request = {
  origin: end,
  destination: end2,
  //waypoints: waypts,
  optimizeWaypoints: false,//是否按顺序
  travelMode: google.maps.TravelMode.TRANSIT,
  transitOptions: {
  departureTime: new Date(1337675679473)},
}
directionsService2.route(request, function(response, status) {
    if (status == google.maps.DirectionsStatus.OK) {
      var directionsDisplay2 = new google.maps.DirectionsRenderer({suppressMarkers: true,preserveViewport: true,});
      directionsDisplay2.setDirections(response);
      directionsDisplay2.setMap(map);
    }
});



            console.log('init end');
  //var t = setTimeout(function(){route2();},3000);

}

$(document).delegate("#infoclick", "click", function(){
  $("#placename").html($("#infowin").html());
  $('.swiper-container').css('display','none');
  //console.log("changed");
});

$(document).delegate("#wishsubmit", "click", function(){
  wish.push($("#wishtext").val());
  //检测即完成和未完成的选择情况
  $("#wishlist").append("<li>"+wish.pop()+"</li>");
  console.log(wish.pop());
});

$(document).delegate("#tripsubmit", "click", function(){
  trip.push($("#triptext").val());
  $("#triplist").append("<li>"+trip.pop()+"</li>");
});
</script>



<script>

</script>   

<!-- 上海旅行D1【第一段】
这里是新的行程：
上海旅行D1【第一段】
静安寺——南京路步行街（15分钟）

步行88米 1分钟
静安寺站
（南京西路、人民广场 5分钟）
人民广场
（步行350米 5分钟）
南京路步行街


上海旅行D1【第二段】
南京路步行街——外滩（19分钟）

（步行310米 7分钟）
浙江中路
（乘坐37路 江西中路、南京东路 8分钟）
南京东路站
（步行210米 4分钟）
外滩-->